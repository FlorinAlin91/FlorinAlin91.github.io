<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Get a Quote - Mihaila Smart Solutions</title>
<style>
  body{margin:0;background:#0a0a0a;color:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
  header{padding:24px 28px}
  header a{color:#ffbf2b;text-decoration:none;font-weight:600}
  main{max-width:520px;margin:24px auto;padding:0 16px}
  h1{color:#ffbf2b;text-align:center}
  form{margin-top:16px;background:rgba(255,191,43,.05);border:1px solid rgba(255,191,43,.3);border-radius:12px;padding:20px;box-shadow:0 0 18px rgba(255,191,43,.12)}
  label{display:block;margin:10px 0 6px;color:#ffbf2b;font-weight:600}
  input,textarea{width:100%;background:#111;border:1px solid rgba(255,191,43,.35);border-radius:8px;color:#fff;padding:12px;outline:none}
  input:focus,textarea:focus{border-color:#ffbf2b;box-shadow:0 0 10px rgba(255,191,43,.35)}
  button{width:100%;margin-top:10px;padding:12px 14px;border:none;border-radius:8px;background:linear-gradient(90deg,#ffbf2b,#ff9f00);color:#000;font-weight:800;cursor:pointer}
  .fb{display:none;margin:14px 0 0;background:rgba(255,191,43,.06);border:1px solid rgba(255,191,43,.35);border-radius:10px;padding:14px;text-align:center}
  .fb a,.fb button{display:inline-block;margin:6px 6px 0;padding:10px 14px;border-radius:8px;text-decoration:none}
  .gml{background:#202124;color:#fff}
  .outl{background:#0e63b6;color:#fff}
  .cpy{background:transparent;border:1px solid rgba(255,191,43,.5);color:#ffbf2b;cursor:pointer}
</style>
</head>
<body>

<header><a href="index.html">← Back to Home</a></header>

<main>
  <h1>Get a Quote</h1>
  <form id="quoteForm" novalidate>
    <label>Your name</label>
    <input id="q-name" type="text" placeholder="Your name" required>

    <label>Email</label>
    <input id="q-email" type="email" placeholder="your@email.com" required>

    <label>Message</label>
    <textarea id="q-message" rows="5" placeholder="How can we help?" required></textarea>

    <button type="submit">Send</button>
  </form>

  <!-- link invizibil pentru mailto -->
  <a id="mailtoLink" href="#" style="display:none">mailto</a>

  <!-- fallback dacă nu există client de e-mail setat -->
  <div id="fallbackEmail" class="fb">
    <p>Dacă nu s-a deschis aplicația de e-mail, folosește una dintre opțiuni:</p>
    <a id="openGmail" class="gml" target="_blank" rel="noopener">Deschide în Gmail</a>
    <a id="openOutlook" class="outl" target="_blank" rel="noopener">Deschide în Outlook Web</a>
    <button id="copyBody" class="cpy" type="button">Copiază mesajul</button>
  </div>
</main>

<script>
(function () {
  const form     = document.getElementById('quoteForm');
  const mailtoEl = document.getElementById('mailtoLink');
  const fbBox    = document.getElementById('fallbackEmail');
  const gmailA   = document.getElementById('openGmail');
  const outlookA = document.getElementById('openOutlook');
  const copyBtn  = document.getElementById('copyBody');
  const TO       = 'office@mihailasmartsolutions.co';

  const enc = s => encodeURIComponent(s || '');

  form.addEventListener('submit', e => {
    e.preventDefault();

    const name    = document.getElementById('q-name').value.trim();
    const email   = document.getElementById('q-email').value.trim();
    const message = document.getElementById('q-message').value.trim();

    const subject = Quote request from ${name || 'website visitor'};
    const body =
`Name: ${name}
Email: ${email}

Message:
${message}

---------------------------
This message was sent from the Mihaila Smart Solutions Quote Form
Website: https://mihailasmartsolutions.co`;

    // 1) încearcă mailto (client local)
    const mailtoURL = mailto:${TO}?subject=${enc(subject)}&body=${enc(body)};
    try {
      mailtoEl.setAttribute('href', mailtoURL);
      mailtoEl.setAttribute('target', '_self'); // iOS preferă _self
      mailtoEl.click();
    } catch (_) {}

    // 2) pregătește fallback Gmail / Outlook Web + Copy
    const gmailURL   = https://mail.google.com/mail/?view=cm&fs=1&to=${enc(TO)}&su=${enc(subject)}&body=${enc(body)};
    const outlookURL = https://outlook.office.com/mail/deeplink/compose?to=${enc(TO)}&subject=${enc(subject)}&body=${enc(body)};

    gmailA.href   = gmailURL;
    outlookA.href = outlookURL;

    fbBox.style.display = 'block';
    fbBox.scrollIntoView({behavior:'smooth', block:'center'});

    copyBtn.onclick = async () => {
      try {
        await navigator.clipboard.writeText(body);
        copyBtn.textContent = 'Copiat ✅';
        setTimeout(() => copyBtn.textContent = 'Copiază mesajul', 2000);
      } catch (err) {
        alert('Nu am putut copia. Selectează manual textul.');
      }
    };
  });
})();
</script>

</body>
</html>
